<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Test Automation Framework : RemoteFileHandler</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="page">
            <div id="main">
                <div id="main-header" class="pageSectionHeader">
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Test Automation Framework : RemoteFileHandler
                        </span>
                    </h1>

                    <div class="page-metadata">
                        <p>This page last changed on Aug 08, 2013 by <font color="#0050B2">ethomev</font>.</p>
                    </div>
                </div>

                <div id="content" class="view">
                    <div id="main-content" class="wiki-content group">
                    <p> </p><p>The remoteFileHandler allows the user to send a file across to the another host i.e from your local machine to remote or from your remote machine to your local. It uses an ssh connection to FTP it across.</p><h3 id="RemoteFileHandler-Constructor">Constructor</h3><p>There are two constructors one that takes a host argument and another that does not. </p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Arguments</th><th class="confluenceTh">Description</th><th class="confluenceTh">Default</th></tr><tr><td class="confluenceTd">Host</td><td class="confluenceTd">The host to where you want to send the file</td><td class="confluenceTd">Null</td></tr></tbody></table></div><h3 id="RemoteFileHandler-"> </h3><h3 id="RemoteFileHandler-Example">Example</h3><h6 id="RemoteFileHandler-Sendingonefile">Sending one file</h6><div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">Host host = DataHandler.getHostByName(&quot;sc1&quot;);
RemoteFileHandler remote = new RemoteFileHandler(host);
 
//// sending file from local host to remotehost
String localFileLocation = &quot;src/resources/FilesToSend.txt&quot;;  	//windows address
String remoteFileLocation = &quot;/opt/resources/target/&quot;;  		//unix address
remote.copyLocalFileToRemote(localFileLocation ,remoteFileLocation);
  
// sending file from remote host to local host
String localFileLocation = &quot;C:/src/resources/FilesToSend.txt&quot;;
String remoteFileLocation = &quot;/opt/resources/target/&quot;;
remote.copyRemoteFileToLocal(localFileLocation, remoteFileLocation);
 
 </pre>
</div></div><p> </p><h6 id="RemoteFileHandler-SendingMultiplefiles">Sending Multiple files</h6><div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">Host host = DataHandler.getHostByName(&quot;sc1&quot;); 
RemoteFileHandler remote = new RemoteFileHandler(host); 
 
// sending file from local host to remotehost 
String remoteFileLocation = &quot;/opt/resources/target/&quot;;  		//unix address 
 
 
File file = new File(&quot;src/main/FilesToSend&quot;);
List allFiles = file.listFiles();
 
for(int i=0; i&lt;allfiles.size(); i++){
remote.copyLocalFileToRemote(allFiles[i].getAbsolutePath(),remoteFileLocation); 
}
 </pre>
</div></div><p> </p><h3 id="RemoteFileHandler-SFTPFailedtostartException">SFTP Failed to start Exception</h3><p>If by using the file handler to send mutliple files across  and you recieve an error stating that the SFTP client failed to start or the server has refused the connection. It may be because the blade ssh configuration for the maximum number of ssh session concurrently has not been set or is set to low. By default this value is 10. It will need to be changed to a higher value for this issuer to be resolved.</p><p> </p><p>1) Use putty connection to ssh to your remote machine</p><p>2) Go to the sshd configuration file cd /etc/ssh/sshd_config</p><p>3) Edit file and add &quot;MaxSession &lt;your_new_value&gt;&quot; to the file</p><p>4) Restart the SSH server by typing /etc/init.d/sshd restart</p><p> </p><h3 id="RemoteFileHandler-.1"> </h3><p> </p><p> </p><p> </p><p> </p>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" style="background: url(http://confluence-oss.lmera.ericsson.se/images/border/border_bottom.gif) repeat-x;">
                <p><small>Document generated by Confluence on Sep 11, 2013 15:39</small></p>
            </div>
        </div>     </body>
</html>
