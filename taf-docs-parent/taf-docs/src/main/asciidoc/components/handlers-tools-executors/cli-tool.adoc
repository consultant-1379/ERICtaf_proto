CLI-Tool
============

link:#TAFCLI-Tool-Introduction[Introduction]

link:#TAFCLI-Tool-SettingTerminalTypeforyourCLISession[Setting Terminal
Type for your CLI Session]

link:#TAFCLI-Tool-WhitespaceCharacters[Whitespace Characters ]

* link:#TAFCLI-Tool-1)Inputoftool[1) Input of tool]
* link:#TAFCLI-Tool-2)Outputoftool[2) Output of tool ]

link:#TAFCLI-Tool-ImplementingAutoGeneratedCLI[Implementing Auto
Generated CLI]

link:#TAFCLI-Tool-CSVandMMConnection[CSV and MM Connection]

* link:#TAFCLI-Tool-1ActionPointand1VerificationPoint[1 Action Point and
1 Verification Point]
*
link:#TAFCLI-Tool-1ActionPointandMultipleVerificationPointsformultiplevalues[1
Action Point and Multiple Verification Points for multiple values]
*
link:#TAFCLI-Tool-MultipleActionPointswithSingleVerificationPointEach[Multiple
Action Points with Single Verification Point Each]
*
link:#TAFCLI-Tool-MultipleActionPointswithMultipleVerificationPointsforMultipleValues[Multiple
Action Points with Multiple Verification Points for Multiple Values]
* link:#TAFCLI-Tool-MultipleTCScenario[Multiple TC Scenario]

link:#TAFCLI-Tool-StoringCSVData[Storing CSV Data]

* link:#TAFCLI-Tool-MMLink[MM Link]
* link:#TAFCLI-Tool-MMDataStorage[MM Data Storage]

link:#TAFCLI-Tool-ImplementedCLIExecutionmanually[Implemented CLI
Execution manually ]

[[TAFCLI-Tool-Introduction]]
Introduction
------------

In this section the CLI implementation for taf will be explained with
some useful examples and links. The CLI epic in its simplest form is set
to allow the user to send mulitpl CLI commands in one single session.

In accordance to the standard testing in a CLI context this will be
developed to execute a command and then expect an outcome with or with
timeout. Both standard error and standard out will be monitored and or
can be selected which one or both the user want to look at. For more
information please see the CLI EPIC
http://jira-oss.lmera.ericsson.se/browse/CIP-939[image:http://jira-oss.lmera.ericsson.se/images/icons/issuetypes/epic.png[image]CIP-939]
- As a developer I want to design Test Case so it can be executed using
CLI
(image:http://jira-oss.lmera.ericsson.se/images/icons/statuses/open.png[image]Open)
 

 

[[TAFCLI-Tool-SettingTerminalTypeforyourCLISession]]
Setting Terminal Type for your CLI Session
------------------------------------------

 To start a CLI session the user can set the terminal type once for this
session. There are two methods getSession and getNewSession. the method
getSession() will create a new session however if a session
already exists with the same information, then that previous session
will be returned. The getNewSession () will simply create a new session
each time.

The CLI session currently will only support either the default terminal
on the server your comunicating towards and if the user specifies a
terminal type *only the vt100 or xterm*can be set. If another terminal
is specified a debug message will be written to the user stating: ``This
terminal type <terminal type specified> is not supported and will not be
set''.

[source,java]
----
import com.ericsson.cifwk.taf.tools.v2.Session;

import com.ericsson.cifwk.taf.tal.cli.TerminalVT100
import com.ericsson.cifwk.taf.tal.cli.TerminalXTerm
.....
 
Host host = DataHandler.getHostByName("ms1");  //taking host properties for ms1
TerminalVT100 vt100 = new TerminalVT100()
TerminalXTerm xterm = new TerminalXTerm()
  
vt100.setTerminal(80, 24 , 0, 0, "")
xterm.setTerminal(80, 24 , 0, 0, "")
          
Session session.getSession(host, vt100);    //terminal type vt100
Session session.getSession(host, xterm);    //terminal type xterm
 
Session session.getSession(host);                   //terminal type that is default on the other machine
Session session.getSession(host, null);             //terminal type that is default on the other machine
----

 

[[TAFCLI-Tool-WhitespaceCharacters]]
Whitespace Characters 
----------------------

The Cli tool will actively support both terminal type characters sent
and remove whitepsace characters from the output on return.

[[TAFCLI-Tool-1)Inputoftool]]
1) Input of tool
++++++++++++++++

For example in the code the user can send a \b or \t to indicate it
wants to perform a back space or horizontal tab. the CLI tool will
convert this value into its char reference and send the command.

i.e *printf "hello\b \t world*" will result in –>  *hell          world*

Below is the list of commands support

 

[cols="<,<,<",]
|=======================
|BEL |\a |Bell
|BS |\b |Backspace
|HT |\t |Horizontal Tab
|LF |\n |Line feed
|VT |\v |Vertical Tab
|FF |\f |Form feed
|CR |\r |Carriage return
|ESC |\e |Escape
|NUL |\0 |Null character
|=======================

[[TAFCLI-Tool-2)Outputoftool]]
2) Output of tool 
++++++++++++++++++

All Whitespace characters returned  from the CLI tool will be removed
from output that includes all 0-31 ascii characters and character 127
(which is delete).

[[TAFCLI-Tool-ImplementingAutoGeneratedCLI]]
Implementing Auto Generated CLI
-------------------------------

 

[[TAFCLI-Tool-CSVandMMConnection]]
CSV and MM Connection
^^^^^^^^^^^^^^^^^^^^^

Let us Consider the Test Case ID for this illustration is
``CIP-2507_Func_1'' and ``CIP-2507_Func_2''.

[[TAFCLI-Tool-1ActionPointand1VerificationPoint]]
1 Action Point and 1 Verification Point
+++++++++++++++++++++++++++++++++++++++

*MM:*

image:download/attachments/26155028/389371107.png[image]

*CSV:*

Step

args

stdout

stderr

exitcode

timeout

host

CIP-2507_Func_1_Step1

1000k ms

Passed for 1000k ms

 

 

10000

SC-1

CIP-2507_Func_1_Step1

3000k ms

Passed for 3000k ms

 

 

20000

SC-1

[[TAFCLI-Tool-1ActionPointandMultipleVerificationPointsformultiplevalues]]
1 Action Point and Multiple Verification Points for multiple values
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

*MM:*

image:download/attachments/26155028/589731016.png[image]

*CSV:*

[cols="<,<,<,<,<,<,<",]
|=======================================================================
|Step |args |stdout |stderr |exitcode |timeout |host

|CIP-2507_Func_1_Step1 |1000k ms |Passed for 1000k ms |  |0 |10000 |SC-2

|CIP-2507_Func_1_Step1 |3000k ms |Passed for 3000k ms |  |21 |20000
|SC-1
|=======================================================================

[[TAFCLI-Tool-MultipleActionPointswithSingleVerificationPointEach]]
Multiple Action Points with Single Verification Point Each
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

*MM:*

image:download/attachments/26155028/1061315111.png[image]

*CSV:*

[cols="<,<,<,<,<,<,<",]
|=======================================================================
|Step |args |stdout |stderr |exitcode |timeout |host
|CIP-2507_Func_1_Step1 |1000k ms |Passed for 1000k ms |  |  |10000 |MS-1
|CIP-2507_Func_1_Step2 |1000k ms |  |Failed |  |20000 |PL
|=======================================================================

[[TAFCLI-Tool-MultipleActionPointswithMultipleVerificationPointsforMultipleValues]]
Multiple Action Points with Multiple Verification Points for Multiple
Values
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

*MM:*

image:download/attachments/26155028/1661452699.png[image]

*CSV:*

[cols="<,<,<,<,<,<,<",]
|=======================================================================
|Step |args |stdout |stderr |exitcode |timeout |host

|CIP-2507_Func_1_Step1 |1000k ms |Passed for 1000k ms |  |0 |10000
|NETSIM

|CIP-2507_Func_1_Step1 |3000k ms |Passed for 3000k ms |  |0 |10000
|NETSIM

|CIP-2507_Func_1_Step2 |1000k ms |  |Failed |1 |20000 |RC

|CIP-2507_Func_1_Step2 |2000k ms |  |Failed |1 |20000 |RC
|=======================================================================

[[TAFCLI-Tool-MultipleTCScenario]]
Multiple TC Scenario
++++++++++++++++++++

*MM:*

image:download/attachments/26155028/619916316.png[image]

 

*CSV:*

Step

args

stdout

stderr

exitcode

timeout

host

CIP-2507_Func_1_Step1

1000k ms

Passed for 1000k ms

Empty

 

10000

SC-1

CIP-2507_Func_1_Step1

3000k ms

Passed for 3000k ms

Empty

 

10000

SC-1

CIP-2507_Func_1_Step2

1000k ms

 

Failed

1

20000

SC-2

CIP-2507_Func_1_Step2

2000k ms

 

Failed

1

20000

SC-2

CIP-2507_Func_2_Step1

1000k ms

Passed for 1000k ms

 

0

10000

NETSIM

CIP-2507_Func_2_Step1

3000k ms

Passed for 3000k ms

 

0

10000

NETSIM

CIP-2507_Func_2_Step2

1000k ms

 

Failed

1

20000

RC

CIP-2507_Func_2_Step2

2000k ms

 

Failed

1

20000

RC

 

[[TAFCLI-Tool-StoringCSVData]]
Storing CSV Data
^^^^^^^^^^^^^^^^

[[TAFCLI-Tool-MMLink]]
MM Link
+++++++

[[TAFCLI-Tool-MMDataStorage]]
MM Data Storage
+++++++++++++++

[[TAFCLI-Tool-ImplementedCLIExecutionmanually]]
Implemented CLI Execution manually 
-----------------------------------

 

 

 
